

    function PersonalDetailsError(e) {
        $("#frmPersonalDetails").validate({
            rules: {
                AddressLine1: {
                    required: function(a) {
                        return "12" == e.PackageId || null != $("input[name='DeliveryOption']:checked").val() && "Home Delivery" == $("input[name='DeliveryOption']:checked").val()
                    },
                    Address: {
                        Address: !0
                    }
                },
                AddressLine2: {
                    required: function(a) {
                        return "12" == e.PackageId || null != $("input[name='DeliveryOption']:checked").val() && "Home Delivery" == $("input[name='DeliveryOption']:checked").val()
                    },
                    Address: {
                        Address: !0
                    }
                },
                PinCode: {
                    required: !0
                },
                DealerId: {
                    required: !0
                },
                CityId: {
                    required: !0
                },
                DeliveryOption: {
                    required: !0
                }
            },
            messages: {
                AddressLine1: {
                    required: e.Content.AddressLine1,
                    Address: "Special characters except , . - are not allowed"
                },
                AddressLine2: {
                    required: e.Content.ErrAddressLine2,
                    Address: "Special characters except , . - are not allowed"
                },
                PinCode: {
                    required: e.Content.ErrPinCode,
                    pin: "Enter Valid Pin Code"
                },
                ErrLocation: {
                    required: e.Content.ErrLocation
                },
                DealerId: {
                    required: e.Content.ErrddlDealer
                },
                DeliveryOption: {
                    required: "Please select preferred delivery option"
                }
            }
        })
    }
    function Register(e) {
        $("#frmRegisterDetails").validate({
            rules: {
                MobileNumber: {
                    required: !0,
                    number: !0,
                    minlength: 10,
                    MobileNo_Start: {
                        MobileNo_Start: !0
                    }
                },
                FullName: {
                    required: !0,
                    minlength: 2
                },
                txtLocation: {
                    required: !0,
                    minlength: 1
                },
                Email: {
                    required: !0,
                    email: !0
                },
                CityId: {
                    required: !0
                },
                RegistrationConsent: {
                    required: !0
                }
            },
            messages: {
                MobileNumber: {
                    required: e.userFormData.ErrMobile,
                    number: e.userFormData.ErrMobileInvalid,
                    MobileNo_Start: e.userFormData.ErrMobileInvalid,
                    minlength: e.userFormData.ErrMobileInvalid
                },
                FullName: {
                    required: e.userFormData.ErrName
                },
                FullName: {
                    required: e.userFormData.ErrName
                },
                Email: {
                    required: e.userFormData.ErrEmail,
                    email: e.userFormData.ErrInvalidEmail
                },
                txtLocation: {
                    required: e.userFormData.ErrLocation
                },
                RegistrationConsent: {
                    required: e.userFormData.ErrConsent
                }
            }
        })
    }
    function ValidateVariantForm() {
        $("#frmVariantForm").validate({
            rules: {
                txtLocation: {
                    required: !0,
                    minlength: 1
                }
            },
            messages: {
                txtLocation: {
                    required: $("#txtLocation").data("validationmsg")
                }
            }
        })
    }
    function ValidateCancelBooking() {
        $("#frmCancelBooking").validate({
            rules: {
                ReasonId: {
                    required: !0
                },
                ReasonOfCancellation: {
                    required: function(e) {
                        return "Other" == $("#ReasonId option:selected").text()
                    }
                }
            }
        })
    }
    function getCookie(e) {
        for (var a = e + "=", t = document.cookie.split(";"), i = 0; i < t.length; i++) {
            for (var n = t[i]; " " == n.charAt(0); )
                n = n.substring(1);
            if (0 == n.indexOf(a))
                return n.substring(a.length, n.length)
        }
        return ""
    }
    function getDeviceType() {
        var e = navigator.userAgent.indexOf("(") + 1
          , a = navigator.userAgent.indexOf(")") + e
          , t = navigator.userAgent.substring(e, a - e).replace("(", "");
        return t.match(/Windows Phone/i) ? t.split(";")[t.split(";").length - 1].trim() : !0 === t.includes("Android") ? t.split(";")[2].includes("Build") ? t.split(";")[2].split("Build")[0].trim() : t.split(";")[2] : !0 === t.includes("iPhone") ? "iPhone" : !0 === t.includes("iPad") ? "iPad" : t
    }
    function selectPackgeClick(e) {
        $("#btnChoosePackageSubmit").removeClass("disabled")
    }
    function fnPackageSelection(e) {
        var a = $("#frmVariantForm ul#new-iqube-tab li").find("a.nav-link.active").data("variantid");
        $("#iqube-" + a + " .select-charger-iqube div").find("div.package-lg-card").removeClass("package-selected"),
        $(e).addClass("package-selected");
        var t = $(e).data("packagename")
          , i = $(e).data("pricewithgst");
        $("#idSelectedPackagePrice").html(i),
        $("#idSelectedPackageName").html(t),
        GetCalculatedAmount(i, $("#frmVariantForm #iqube-" + a + " ul#left-iqube-tab li").find("a.active").data("variantcolorprice"))
    }
    function setSummarySectionValues(e, a) {
        var t = $("#iqube-" + e).data("variantname")
          , i = $("#frmVariantForm #iqube-" + e + " ul#left-iqube-tab li").find("a.active")
          , n = $(i).data("variantcolorprice")
          , o = $(i).data("isvariantreserve")
          , l = $(i).data("colorimageurl")
          , r = $("#idVariantSummarySection").data("startingpricetext");
        if ("true" == $("#IsCitySelected").val() && 0 == a) {
            $("#loader").modal("show");
            i = $("#frmVariantForm #iqube-" + e + " ul#left-iqube-tab li").find("a.active");
            GetDeliveryTimeline("", "", "", e, $(i).data("colorid"), $("#CityId").val())
        } else {
            if ("true" == $("#DisplayPackages").val() && "False" == o) {
                var s = $("#iqube-" + e + " .select-charger-iqube div").find("div.package-selected")
                  , c = $(s).data("packagename")
                  , d = $(s).data("pricewithgst");
                GetCalculatedAmount(d, n),
                $("#idPaymentSummarySection").removeClass("d-none"),
                $("#frmVariantForm #iqube-" + e + " .select-charger-iqube").removeClass("d-none"),
                $("#idSelectedPackagePrice").html(d),
                $("#idSelectedPackageName").html(c)
            } else
                $("#idPaymentSummarySection").addClass("d-none"),
                $("#frmVariantForm #iqube-" + e + " .select-charger-iqube").addClass("d-none");
            var u = $("#StartingOf").val();
            null != $("#CityType").val() && "" != $("#CityType").val() && $("#CityType").val() == $("#LaunchCityTypeValue").val() && "False" == o && (r = $("#MRP").val(),
            u = $("#MRP").val()),
            $(".clsSelectedVariantPrice").html(r + n),
            $("#idDeliverySectionPrice").html(u + " of " + t + ": " + n)
        }
        $(".clsSelectedVariantName").html(t),
        $("#idSelectedVaraintImage").attr("src", l)
    }
    function SelectPreviousPackage() {
        var e, a = $("#SelectedPackageValue").val();
        null != a && (0 != a ? ((e = $("#" + a)).addClass("package-selected"),
        e.removeClass("notselected")) : ((e = $("#12")).addClass("package-selected"),
        e.removeClass("notselected")))
    }
    function fillCityList(e) {
        $.ajax({
            type: "GET",
            url: "/api/city/",
            success: function(a) {
                var t = "<option></option>";
                $.each(a.response.Data, (function(e, a) {
                    t += "<option value=" + a.Id + " name=" + a.Id + ">" + a.Name + "</option>"
                }
                )),
                $("#" + e).html(t)
            },
            error: function(e) {
                console.log("City service issue.")
            }
        })
    }
    function fillPinCode(e, a) {
        $("#" + a).empty(),
        $.ajax({
            type: "POST",
            url: "/api/citypincode/",
            data: {
                pincode: $("#" + e).val()
            },
            success: function(e) {
                var t = "<option></option>";
                $.each(e.response.Data, (function(e, a) {
                    t += "<option value=" + a.Pincode + " name=" + a.Pincode + ">" + a.Pincode + "</option>"
                }
                )),
                $("#" + a).html(t)
            },
            error: function(e) {
                console.log("Pincode service issue.")
            }
        })
    }
    function validatePIN(e) {
        return !!new RegExp("^[1-9][0-9]{5}$").test(e)
    }
    function CallVariantApiFunction(e) {
        $("#loader").modal("show");
        var a = !1
          , t = 0
          , i = !1
          , n = !1
          , o = $("#iqube-" + e + " ul#left-iqube-tab li").find("a.active").data("colorid")
          , l = $("#iqube-" + e + " ul#left-iqube-tab li").find("a.active").data("isvariantreserve");
        "true" == $("#DisplayPackages").val() && "False" == l && $("#CityType").val() == $("#LaunchCityTypeValue").val() && (t = $("#iqube-" + e + " .select-charger-iqube div").find("div.package-selected").data("packageid"),
        i = !0),
        "true" == $("#IsCitySelected").val() && "" != $("#CityId").val() && $("#CityId").val() != $("#PreviousCityId").val() && (n = !0),
        "true" == $("#SendEmail").val() && ($("#PreviousVariantId").val() != e || 1 == i && $("#PreviousPackageId").val() != t || $("#PreviousColorId").val() != o || 1 == n) && (a = !0),
        SubmitVaraintDataDB({
            VariantId: e,
            PackageId: t,
            ColorId: o,
            CityId: $("#CityId").val(),
            Pincode: $("#Pincode").val(),
            IsCitySelected: n,
            SendEmail: a
        })
    }
    function GetDeliveryTimeline(e, a, t, i, n, o) {
        $("#CityNotExist").hide();
        var l = $("#OtherCityTypeValue").val()
          , r = {
            cityName: e,
            pincode: a,
            state: t,
            variantId: i,
            colorId: n,
            cityId: o
        };
        $.ajax({
            type: "post",
            url: "api/GetCityDeliveryTimelineDetails",
            data: JSON.stringify(r),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function(e) {
                if (e.success) {
                    if ($("#loader").modal("hide"),
                    $("#CityId").val(e.apiResponse.CityId),
                    $("#CityType").val(e.apiResponse.CityType),
                    $("#IsReserve").val(e.apiResponse.IsReserve),
                    $("#location").html(e.apiResponse.Name),
                    $("#frmVariantForm").length) {
                        var a = $("#iqube-" + i).data("variantname")
                          , t = $("#idVariantSummarySection").data("startingpricetext")
                          , n = $("#StartingOf").val();
                        if (e.apiResponse.CityType == $("#LaunchCityTypeValue").val() && 0 == e.apiResponse.IsReserve && (t = $("#MRP").val(),
                        n = $("#MRP").val()),
                        $(".clsSelectedVariantPrice").html(t + e.apiResponse.MRP),
                        $("#idDeliverySectionPrice").html(n + " of " + a + ": " + e.apiResponse.MRP),
                        "true" == $("#DisplayPackages").val() && 0 == e.apiResponse.IsReserve && e.apiResponse.CityType == $("#LaunchCityTypeValue").val()) {
                            var o = $("#iqube-" + i + " .select-charger-iqube div").find("div.package-selected")
                              , r = $(o).data("packagename")
                              , s = $(o).data("pricewithgst");
                            $("#idPaymentSummarySection").removeClass("d-none"),
                            $("#frmVariantForm #iqube-" + i + " .select-charger-iqube").removeClass("d-none"),
                            GetCalculatedAmount(s, e.apiResponse.MRP),
                            $("#idSelectedPackagePrice").html(s),
                            $("#idSelectedPackageName").html(r)
                        } else
                            $("#idPaymentSummarySection").addClass("d-none"),
                            $("#frmVariantForm #iqube-" + i + " .select-charger-iqube").addClass("d-none")
                    }
                    e.apiResponse.isVariantBookingEnable ? l == e.apiResponse.CityType ? "true" == $("#BlockEnquiryCity").val() ? $("#cityChangeBlockedContentSection").show() : (ToggleRegistrationScreenButtons(!0, !0),
                    $("#enquirySectionContent").html(e.apiResponse.LocationSearchDetails.BookingAmount[0])) : (ToggleRegistrationScreenButtons(!0, !0),
                    $("#bookingAmountHeading").html(e.apiResponse.LocationSearchDetails.BookingAmount[0]),
                    $("#bookingAmount").html(e.apiResponse.LocationSearchDetails.BookingAmount[1]),
                    $("#deliveryContentFirst").html(e.apiResponse.LocationSearchDetails.BookingAmount[2]),
                    e.apiResponse.LocationSearchDetails.BookingAmount.length > 4 ? $("#deliveryContentSecond").html(e.apiResponse.LocationSearchDetails.BookingAmount[3] + "<b> " + e.apiResponse.LocationSearchDetails.BookingAmount[4] + "</b>") : $("#deliveryContentSecond").html(e.apiResponse.LocationSearchDetails.BookingAmount[3])) : (ToggleRegistrationScreenButtons(!0, e.apiResponse.isVariantBookingEnable),
                    $("#enquirySectionContent").html(e.apiResponse.LocationSearchDetails.BookingAmount[0]))
                } else
                    $("#loader").modal("hide"),
                    $("#CityNotExist").show(),
                    $(".clsSelectedVariantPrice").html(""),
                    $("#idDeliverySectionPrice").html(""),
                    ToggleRegistrationScreenButtons(!1, !0)
            },
            error: function(e, a) {
                console.log(a),
                $("#loader").modal("hide"),
                $("#CityNotExist").show(),
                $(".clsSelectedVariantPrice").html(""),
                $("#idDeliverySectionPrice").html(""),
                ToggleRegistrationScreenButtons(!1, !0)
            }
        })
    }
    function ToggleRegistrationScreenButtons(e, a) {
        if (e) {
            var t = $("#OtherCityTypeValue").val();
            $("#CityType").val() == t || 0 == a || "False" == a ? ($("#enquirySection").show(),
            $("#launchPrelaunchSection").hide(),
            $("#bookingAmountHeading").hide()) : ($("#launchPrelaunchSection").show(),
            $("#enquirySection").hide(),
            $("#bookingAmountHeading").show()),
            $("#deliveryContentSection").show(),
            $("ul #iconmappin").show(),
            $(".verify-otp-number").show(),
            $("#editsubmitsection").show()
        } else
            $("#deliveryContentSection").hide(),
            $("#cityChangeBlockedContentSection").hide(),
            $("ul #iconmappin").hide(),
            $(".verify-otp-number").hide(),
            $("#editsubmitsection").hide()
    }
    if ($((function() {
        var e, a, t = !1, i = $("#MobileNumber").attr("data-errMsg");
        function n() {
            $("#lblOTPtimeout").hide(),
            $("#btnVerifyOTP").removeAttr("disabled");
            var t = "10:00";
            a = setInterval((function() {
                e = t.split(":");
                var i = parseInt(e[0], 10)
                  , n = parseInt(e[1], 10);
                (i = --n < 0 ? --i : i) < 0 && clearInterval(a),
                n = (n = n < 0 ? 59 : n) < 10 ? "0" + n : n,
                0 == i && 0 == n ? ($("#lblOTPtimeout").show(),
                $("#countdown").text(""),
                clearInterval(a),
                $("#btnVerifyOTP").attr("disabled", !0)) : $("#countdown").text(i + ":" + n + " Remaining"),
                t = i + ":" + n
            }
            ), 1e3)
        }
        function o(e) {
            GetLocationDetails(e.coords.latitude + "," + e.coords.longitude, !0)
        }
        $("input[name=MobileNumber]").length && jQuery.validator.addMethod("MobileNo_Start", (function(e, a) {
            return this.optional(a) || /^[1-9]{1}[0-9]+/.test(e)
        }
        ), i),
        ($("input[name=AddressLine1]").length || $("input[name=AddressLine2]").length) && jQuery.validator.addMethod("Address", (function(e, a) {
            var t = new RegExp("^[a-zA-Z0-9 ,.-]+$");
            return this.optional(a) || t.test(e)
        }
        ), "Special characters except , . - are not allowed"),
        $("#IsFinanceChecked").change((function(e) {
            e.preventDefault(),
            $("#IsFinanceChecked").val($("#IsFinanceChecked").is(":checked"))
        }
        )),
        $("#Consent").change((function(e) {
            e.preventDefault(),
            $("#Consent").val($("#Consent").is(":checked"))
        }
        )),
        $("#MobileNumber").change((function(e) {
            $("#UserExit").hide(),
            e.preventDefault();
            if (10 == this.value.length) {
                var a = {
                    MobileNumber: $("#MobileNumber").val()
                };
                $("#loader").modal("show"),
                $.ajax({
                    type: "post",
                    url: "api/IsUserExit",
                    data: JSON.stringify(a),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function(e) {
                        1 == e.consent ? ($("#dvRegistraitonOptinConsent").hide(),
                        $("#chkRegistrationConsent").prop("checked", !1)) : ($("#dvRegistraitonOptinConsent").show(),
                        $("#chkRegistrationConsent").prop("checked", !0)),
                        null != e && null != e.response && null != e.response.FullName && null != e.response.Email ? ($("div").addClass("focused"),
                        $("#FullName").val(e.response.FullName),
                        $("#Email").val(e.response.Email)) : ($("#loader").modal("hide"),
                        $("#FullName").val(""),
                        $("#Email").val("")),
                        $("#loader").modal("hide")
                    }
                })
            }
        }
        )),
        $("#btnregistrationclose").click((function(e) {
            e.preventDefault(),
            $("#OTP").val(""),
            $("#lblInvalidOTP").hide(),
            $("#lblOTPtimeout").hide(),
            $("#lblErrorMsg").hide()
        }
        )),
        $("#btnRegistrationDetails").click((function(t) {
            $("#UserExit").hide(),
            t.preventDefault();
            $("#frmRegisterDetails").attr("action");
            var i = {
                MobileNumber: $("#MobileNumber").val(),
                FullName: $("#FullName").val(),
                Email: $("#Email").val(),
                CityId: $("#CityId").val(),
                IsUserConsent: $("#chkRegistrationConsent").is(":checked")
            };
            $("#frmRegisterDetails").valid() && $("#deliveryContentSection").is(":visible") ? ($("#loader").modal("show"),
            $.ajax({
                type: "post",
                url: "api/RegistrationDetails",
                data: JSON.stringify(i),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function(t) {
                    t.success ? ($("#otpValodation").modal("show"),
                    null == e || clearInterval(a),
                    n(),
                    PushDataLayerVariantColor("Book_iqube", "Book iqube", $("#btnRegistrationDetails").text(), "iQube", $("#VariantName").val(), $("#ColorName").val())) : ($("#UserExit").show(),
                    $("#lblRegistrationFormErrorMsg").html(t.message),
                    $("#loader").modal("hide")),
                    $("#loader").modal("hide")
                }
            })) : $("html, body").animate({
                scrollTop: $("#personalDetailsSection").offset().top - 100
            }, "slow")
        }
        )),
        $("#btnResendOTP").click((function(e) {
            $("#lblOTPtimeout").hide(),
            $("#lblInvalidOTP").hide(),
            $("#lblErrorMsg").hide(),
            $("#btnVerifyOTP").removeAttr("disabled"),
            e.preventDefault(),
            $("#loader").modal("show"),
            $("#OTP").val("");
            var t = {
                MobileNumber: $("#MobileNumber").val()
            };
            $.ajax({
                type: "post",
                url: "api/ResendOTP",
                data: JSON.stringify(t),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function(e) {
                    e.success && (clearInterval(a),
                    n()),
                    $("#loader").modal("hide")
                }
            }),
            PushDataLayerVariantColor("Book_iqube", "Book iqube", $("#btnResendOTP").text(), "iQube", $("#VariantName").val(), $("#ColorName").val())
        }
        )),
        $("#btnPersonalDetailsNext").click((function(e) {
            $("#_ga").val(getCookie("_ga")),
            $("#DeviceType").val(getDeviceType()),
            $("#frmPersonalDetails").valid() && $("#loader").modal("show")
        }
        )),
        $("#otpValodation").keyup((function(e) {
            13 === e.keyCode && $("#btnVerifyOTP").click()
        }
        )),
        $("#btnDetectLocation").click((function(e) {
            e.preventDefault(),
            $("#CityNotExist").hide(),
            $("#CityId").val(""),
            ToggleRegistrationScreenButtons(!1),
            navigator.geolocation.getCurrentPosition(o, r, l)
        }
        )),
        $("#txtLocation").on("keyup change", (function(e) {
            e.preventDefault(),
            $("#UserExit").hide(),
            $(this).val().length < 1 && ToggleRegistrationScreenButtons(!1)
        }
        ));
        var l = {
            enableHighAccuracy: !0,
            timeout: 5e3,
            maximumAge: 0
        };
        function r(e) {
            $("#locationNoteEnabledMsg").modal("show"),
            console.log(`ERROR(${e.code}): ${e.message}`)
        }
        $("#txtLocation").length && $("#txtLocation").autocomplete({
            source: function(e, a) {
                ToggleRegistrationScreenButtons(!1),
                $("#CityId").val("");
                var t = {
                    query: e.term
                };
                $.ajax({
                    type: "post",
                    url: "api/GetAutoCompleteData",
                    data: JSON.stringify(t),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function(e) {
                        if (e.success) {
                            var t = e.response.DataList;
                            t = $.map(t, (function(e) {
                                if (e.Name.trim())
                                    return {
                                        label: e.Name,
                                        value: e.Name,
                                        name: e.Geo
                                    }
                            }
                            )),
                            a(t)
                        }
                    },
                    error: function(e, a) {
                        console.log(a)
                    }
                })
            },
            select: function(e, a) {
                return $("#txtLocation").val(a.item.label),
                GetLocationDetails(a.item.name, !1),
                !1
            },
            minLength: 1
        });
        var s = "";
        $("#frmVariantForm").length && setSummarySectionValues(s = $("#frmVariantForm ul#new-iqube-tab li").find("a.nav-link.active").data("variantid"), !0),
        $("#frmVariantForm ul#new-iqube-tab li a").click((function(e) {
            setSummarySectionValues(s = $(this).data("variantid"), !1),
            "true" == $("#SelectVariantScreen").val() && PushDataLayerGeneral("Select_Your_iqube", "Select Your iqube", $("#iqube-" + s).data("variantname"), "iQube")
        }
        )),
        $("#frmVariantForm ul#left-iqube-tab li a").click((function() {
            var e = $(this)
              , a = e.data("colorimageurl")
              , t = e.data("colorid");
            if ("true" == $("#IsCitySelected").val())
                $("#loader").modal("show"),
                GetDeliveryTimeline("", "", "", s, t, $("#CityId").val());
            else {
                var i = e.data("variantcolorprice")
                  , n = e.data("isvariantreserve")
                  , o = $("#idVariantSummarySection").data("startingpricetext");
                if (null != $("#CityType").val() && "" != $("#CityType").val() && $("#CityType").val() == $("#LaunchCityTypeValue").val() && "False" == n && (o = $("#MRP").val()),
                "true" == $("#DisplayPackages").val() && "False" == n) {
                    var l = $("#iqube-" + s + " .select-charger-iqube div").find("div.package-selected")
                      , r = $(l).data("packagename")
                      , c = $(l).data("pricewithgst");
                    GetCalculatedAmount(c, i),
                    $("#idPaymentSummarySection").removeClass("d-none"),
                    $("#frmVariantForm #iqube-" + s + " .select-charger-iqube").removeClass("d-none"),
                    $("#idSelectedPackagePrice").html(c),
                    $("#idSelectedPackageName").html(r)
                } else
                    $("#idPaymentSummarySection").addClass("d-none"),
                    $("#frmVariantForm #iqube-" + s + " .select-charger-iqube").addClass("d-none");
                $(".clsSelectedVariantPrice").html(o + i)
            }
            $("#idSelectedVaraintImage").attr("src", a),
            "true" == $("#SelectVariantScreen").val() && PushDataLayerVariantName("Select_Your_iqube", "Select Your iqube", e.data("colorname"), "iQube", $("#iqube-" + s).data("variantname"))
        }
        )),
        $("#submitVariantInfo").click((function(e) {
            e.preventDefault(),
            $("#loader").modal("show"),
            "true" == $("#SelectVariantScreen").val() && PushDataLayerVariantColor("Select_Your_iqube", "Select Your iqube", $("#submitVariantInfo").text(), "iQube", $("#iqube-" + s).data("variantname"), $("#iqube-" + s + " ul#left-iqube-tab li").find("a.active").data("colorname"));
            var a = $("#frmVariantForm").attr("data-SuccessPageLink")
              , t = $("#frmVariantForm #iqube-" + s + " ul#left-iqube-tab li").find("a.active")
              , i = {
                VariantId: s,
                VariantName: $("#iqube-" + s).data("variantname"),
                ColorName: $("#iqube-" + s + " ul#left-iqube-tab li").find("a.active").data("colorname"),
                ColorId: $("#iqube-" + s + " ul#left-iqube-tab li").find("a.active").data("colorid"),
                VariantImageUrl: $(t).data("colorimageurl"),
                VariantImageAlt: $(t).data("colorimagealt"),
                VariantImageTitle: $(t).data("colorimagetitle")
            };
            $.ajax({
                type: "post",
                url: "api/VariantFormDetails",
                data: JSON.stringify(i),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function(e) {
                    e.success ? window.location = a : $("#loader").modal("hide")
                },
                error: function(e, a) {
                    console.log(a),
                    $("#loader").modal("hide")
                }
            })
        }
        )),
        $("#btnEditVariantAndCity").click((function(e) {
            if (e.preventDefault(),
            $("#frmVariantForm").valid()) {
                $("#frmVariantForm ul#new-iqube-tab li").find("a.nav-link.active").data("isvariantbookingenable");
                var a = $("#OtherCityTypeValue").val();
                $("#CityType").val() == a && $("#CityId").val() != $("#PreviousCityId").val() ? ($("#prebookModal").modal("show"),
                $("#loader").modal("hide")) : CallVariantApiFunction(s)
            }
        }
        )),
        $("#btnEditVariant").click((function(e) {
            e.preventDefault(),
            "False" == $("#frmVariantForm ul#new-iqube-tab li").find("a.nav-link.active").data("isvariantbookingenable") ? ($("#BookingDisabledPopup").modal("show"),
            $("#loader").modal("hide")) : CallVariantApiFunction(s)
        }
        )),
        $("#btnSubmitEnquiry").click((function(e) {
            e.preventDefault(),
            CallVariantApiFunction(s)
        }
        )),
        $("#btnVerifyOTP").click((function(e) {
            e.preventDefault(),
            $("#loader").modal("show");
            var a = $("#SuccessPageLink").val()
              , t = $("#EnquirySuccessPageLink").val()
              , i = $("#OtherCityTypeValue").val()
              , n = $("#CityType").val()
              , o = {
                MobileNumber: $("#MobileNumber").val(),
                OTP: $("#OTP").val(),
                VariantId: $("#VariantId").val(),
                ColorId: $("#ColorId").val(),
                Pincode: $("#Pincode").val()
            };
            $.ajax({
                type: "post",
                url: "api/VerifyOTPandSaveVariantDetails",
                data: JSON.stringify(o),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function(e) {
                    e.success ? ($("#OTP").val(""),
                    $("#otpValodation").modal("hide"),
                    PushDataLayerVariantColor("Book_iqube", "Book iqube", $("#btnVerifyOTP").text(), "OTP Verified", $("#VariantName").val(), $("#ColorName").val()),
                    n == i || 0 == e.IsVariantBookingEnable ? window.location = t : window.location = a) : ($("#lblErrorMsg").html(e.message),
                    $("#lblErrorMsg").show(),
                    $("#loader").modal("hide"))
                }
            })
        }
        )),
        $("#btnMakePayment").click((function(e) {
            0 == $("#Consent").is(":checked") ? (e.preventDefault(),
            $("#snackbar").addClass("showmessage"),
            setTimeout((function() {
                $("#snackbar").removeClass("showmessage")
            }
            ), 5e3)) : $("#loader").modal("show")
        }
        )),
        $("#cleardata").click((function(e) {
            e.preventDefault(),
            $("#OTP").val(""),
            $("#loader").modal("hide"),
            $("#lblInvalidOTP").hide(),
            $("#lblErrorMsg").hide()
        }
        )),
        "/iqube/select-package" == window.location.pathname && SelectPreviousPackage(),
        $("#btnChoosePackageSubmit").click((function(e) {
            $("#loader").modal("show"),
            $("#PackageId").val($(".package-selected").prev("#ChoosePackageId").val())
        }
        )),
        $("#rbHomeDelivery").change((function() {
            if (null != $("#ddlDealer").val() && "" != $("#ddlDealer").val()) {
                var e = $("#ddlDealer :selected").text()
                  , a = e.indexOf("|")
                  , t = [e.slice(0, a), e.slice(a + 1)][1]
                  , i = t.indexOf("|")
                  , n = [t.slice(0, i)][0];
                $("#homeDeliverySelectedDealer").text(n + "will contact you for delivery status after the booking is done.")
            } else
                $("#homeDeliverySelectedDealer").text("Dealership will contact you for delivery status after the booking is done.");
            $("#HomeDeliveryModal").modal("show")
        }
        )),
        $("#rbSelfPickUp").change((function() {
            t = !0,
            "12" == $("#PackageId").val() || "Home Delivery" == $("input[name='DeliveryOption']:checked").val() ? $("#DivAddress").show() : $("#DivAddress").hide()
        }
        )),
        $("#btnConfirmDelivery").click((function() {
            $("#DivAddress").show()
        }
        )),
        null != $("input[name='DeliveryOption']:checked").val() && "Self Pick Up" == $("input[name='DeliveryOption']:checked").val() && (t = !0,
        $("#DivAddress").hide()),
        $("#btnCancelHomeDelivery").click((function() {
            $("#rbHomeDelivery").prop("checked", !1),
            t && ($("#rbSelfPickUp").prop("checked", !0),
            "12" == $("#PackageId").val() || "Home Delivery" == $("input[name='DeliveryOption']:checked").val() ? $("#DivAddress").show() : $("#DivAddress").hide())
        }
        )),
        $("#btnHomeDeliveryClose").click((function() {
            $("#rbHomeDelivery").prop("checked", !1),
            t && ($("#rbSelfPickUp").prop("checked", !0),
            "12" == $("#PackageId").val() || "Home Delivery" == $("input[name='DeliveryOption']:checked").val() ? $("#DivAddress").show() : $("#DivAddress").hide())
        }
        )),
        $("#bkgPinCode").change((function(e) {
            if ($("#DealersNotPresent").hide(),
            e.preventDefault(),
            "" == $("#bkgPinCode").val() || null == $("#bkgPinCode").val() || null == $("#bkgPinCode").val()) {
                $("#dealerNotAvailablePopup").modal("show"),
                $("#ddlDealer").empty();
                var a = '<option value="">Distance  |  Dealership Name   |  Location</option>';
                $("#ddlDealer").html(a)
            } else {
                $("#ddlDealer").empty();
                if (6 == this.value.length && validatePIN($("#bkgPinCode").val())) {
                    a = '<option value="">Distance  |  Dealership Name   |  Location</option>';
                    $.ajax({
                        url: "api/FindDealerByPin",
                        type: "POST",
                        data: {
                            Pincode: $("#bkgPinCode").val()
                        },
                        dataType: "json",
                        beforeSend: function() {
                            $("#loader").modal("show")
                        },
                        complete: function() {
                            $("#loader").modal("hide")
                        },
                        success: function(e) {
                            1 == e.Status ? ($("#DealersNotPresent").hide(),
                            $.each(e.data, (function(e, t) {
                                a += "<option value=" + t.Id + ">" + t.DistanceLimit + "KM  | " + t.Name + " | " + t.LandMark + "</option>"
                            }
                            )),
                            $("#ddlDealer").html(a),
                            $("#loader").modal("hide")) : ($("#DealersNotPresent").show(),
                            $("#ddlDealer").html(a))
                        },
                        error: function(e) {
                            console.log(e)
                        }
                    })
                }
            }
        }
        )),
        $("#btnSaveVariantPackage").click((function(e) {
            var a = !0
              , t = $("#SuccessPageLink").val()
              , i = $("#CurrentPackageName").val()
              , n = $("#CurrentPackageId").val()
              , o = $(".select-charger-iqube div").find("div.package-selected")
              , l = $(o).attr("data-packageName")
              , r = $(o).attr("data-packageId");
            PushDataLayerGeneral("change_charging_solution", "Change Charging Solution", i, l),
            $("#loader").modal("show"),
            n != r && (a = !0);
            var s = {
                packageId: r,
                sendEmail: a
            };
            $.ajax({
                type: "post",
                url: "api/SelectVariantPackage",
                data: JSON.stringify(s),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function(e) {
                    e.success ? window.location = t : $("#loader").modal("hide")
                },
                error: function(e, a) {
                    console.log(a),
                    $("#loader").modal("hide")
                }
            })
        }
        )),
        $("#ReasonId").change((function(e) {
            e.preventDefault(),
            null != $("#frmCancelBooking").data("validator") && $("#frmCancelBooking").data("validator").resetForm()
        }
        )),
        $("#btnCancelBooking").click((function(e) {
            if (e.preventDefault(),
            $("#frmCancelBooking").valid()) {
                var a = $("#SuccessPageLink").val();
                $("#loader").modal("show");
                var t = {
                    ReasonId: $("#ReasonId option:selected").val(),
                    ReasonOfCancellation: $("#ReasonOfCancellation").val()
                };
                $.ajax({
                    type: "post",
                    url: "api/CancelBooking",
                    data: JSON.stringify(t),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function(e) {
                        e.success ? window.location = a : $("#loader").modal("hide")
                    },
                    error: function(e, a) {
                        console.log(a),
                        $("#loader").modal("hide")
                    }
                })
            }
        }
        )),
        $(".selectcharge-slider").length && $(".selectcharge-slider").not(".slick-initialized").slick({
            slidesToShow: 1,
            slidesToScroll: 1,
            mobileFirst: !0,
            arrows: !1,
            dots: !0,
            responsive: [{
                breakpoint: 991,
                settings: "unslick"
            }]
        }),
        $(".bookiqube-slider").length && $(".bookiqube-slider").not(".slick-initialized").slick({
            arrows: !0,
            draggable: !1,
            dots: !1,
            slidesToShow: 1,
            autoplay: !1,
            autoplaySpeed: 1500,
            prevArrow: '<button type="button" data-role="none" class="slick-prev">Previos</button>',
            nextArrow: '<button type="button" data-role="none" class="slick-next">Next</button>',
            responsive: [{
                breakpoint: 1024,
                settings: {
                    slidesToShow: 1,
                    infinite: !0
                }
            }, {
                breakpoint: 600,
                settings: {
                    slidesToShow: 1,
                    dots: !1
                }
            }, {
                breakpoint: 300
            }]
        }),
        $(".bookiqube-slider").show(),
        $(".bookiqube-slider .slick-prev").click((function(e) {
            "true" == $("#SelectVariantScreen").val() && PushDataLayerVariantColor("Select_Your_iqube", "Select Your iqube", "previous arrow", "iQube", $("#iqube-" + s).data("variantname"), $("#iqube-" + s + " ul#left-iqube-tab li").find("a.active").data("colorname"))
        }
        )),
        $(".bookiqube-slider .slick-next").click((function(e) {
            "true" == $("#SelectVariantScreen").val() && PushDataLayerVariantColor("Select_Your_iqube", "Select Your iqube", "next arrow", "iQube", $("#iqube-" + s).data("variantname"), $("#iqube-" + s + " ul#left-iqube-tab li").find("a.active").data("colorname"))
        }
        ))
    }
    )),
    $("#CityId").change((function() {
        fillPinCode("CityId", "PinCode")
    }
    )),
    $("#ddlLocation").change((function() {
        $("#ddlDealer").empty(),
        $("#ddlDealer").html('<option value="">Distance  |  Dealership Name   |  Location</option>'),
        fillPinCode("ddlLocation", "bkgPinCode")
    }
    )),
    "/iqube/change-variant-city" == window.location.pathname) {
        var isVariantBookingEnable = $("#frmVariantForm ul#new-iqube-tab li").find("a.nav-link.active").data("isvariantbookingenable");
        ToggleRegistrationScreenButtons(!0, isVariantBookingEnable)
    }
    function GetCalculatedAmount(e, a) {
        var t = {
            varaiantPrice: e.replace("&#x20B9;", ""),
            pacakgePrice: a.replace("&#x20B9;", "")
        };
        $.ajax({
            type: "post",
            url: "api/GetCalculatedAmount",
            data: JSON.stringify(t),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function(e) {
                $("#idEstimatedTotal").html("&#x20B9; " + e.total.toString())
            },
            error: function(e, a) {
                console.log(a)
            }
        })
    }
    function GetLocationDetails(e, a) {
        $("#CityNotExist").hide();
        var t = {
            location: e
        }
          , i = ""
          , n = "";
        $("#frmVariantForm").length ? (i = $("#frmVariantForm ul#new-iqube-tab li").find("a.nav-link.active").data("variantid"),
        n = $("#iqube-" + i + " ul#left-iqube-tab li").find("a.active").data("colorid")) : (i = $("#VariantId").val(),
        n = $("#ColorId").val(),
        PushDataLayerVariantColor("Book_iqube", "Book iqube", "Find Location", "iQube", $("#VariantName").val(), $("#ColorName").val())),
        $("#loader").modal("show"),
        $.ajax({
            type: "post",
            url: "api/GetLocationDetails",
            data: JSON.stringify(t),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function(e) {
                e.success ? ($("#Pincode").val(e.response.Pincode),
                $("#LatlongCity").val(e.response.City),
                $("#State").val(e.response.State),
                a && ($("#txtLocation").closest(".form-group").addClass("focused"),
                $("#txtLocation").val(e.response.Pincode + ", " + e.response.City)),
                GetDeliveryTimeline(e.response.City, e.response.Pincode, e.response.State, i, n, "")) : $("#loader").modal("hide")
            },
            error: function(e, a) {
                console.log(a),
                $("#loader").modal("hide")
            }
        })
    }
    function SubmitVaraintDataDB(e) {
        var a = $("#SuccessPageLink").val()
          , t = $("#EnquirySuccessPageLink").val()
          , i = $("#OtherCityTypeValue").val()
          , n = $("#CityType").val()
          , o = $("#frmVariantForm ul#new-iqube-tab li").find("a.nav-link.active").data("isvariantbookingenable");
        $.ajax({
            type: "post",
            url: "api/SubmitVariantDetails",
            data: JSON.stringify(e),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function(e) {
                e.success ? window.location = n == i ? t : "True" == o ? a : "/iqube/Dashboard" : $("#loader").modal("hide")
            },
            error: function(e, a) {
                console.log(a),
                $("#loader").modal("hide")
            }
        })
    }